#Database 

트랜잭션은 확실한 이점과 한계가 있으며 모든 어플리케이션에 트랜잭션이 필요하지는 않다.

트랜잭션을 쓰지 않는게 성능 향상과 가용성 측면에서 이득일 때도 있으며 어떤 안전 속성은 트랜잭션 없이도 보장될 수 있다.
트랜잭션이 필요한지 여부를 판단하려면 트랜잭션이 제공하는 `안전성 보장`에는 어떤것이 있고 관련 비용은 무엇인지 알아야한다.
### 트랜잭션이 제공하는 안전성 보장 (ACID)

**원자성 (Atomic)**
- 하나의 원자적 트랜잭션으로 묶인 여러 작업은 모두 커밋되거나 모두 롤백되어야한다.
- 트랜잭션이 롤백되었다면 어플리케이션에서 이 트랜잭션이 어떤 것도 변경하지 않았음을 보장할 수 있으므로 안전하게 재시도할 수 있다.

**일관성 (Consistency)**
- 데이터에 관한 불변식이 있어야 한다.
- 데이터가 유효한지 여부는 사실 데이터베이스가 아니라 어플리케이션이 정의해야한다.
	- 데이터베이스만으로는 일관성을 유지할 수 없다.
	- C는 실제로 ACID에 속하지 않는다. (그저 약어 맞추기 용)

**격리성 (Isolation)**
- 동시에 실행된는 트랜잭션은 서로 격리된다.
- 여러 클라이언트가 동일한 레코드에 동시에 쓰기작업을 한다면 동시성 문제 (Race Condition)이 발생한다.
- 여러 트랜잭션이 동시에 실행됐더라도 트랜잭션이 순차적으로 실행됐을 때와 같은 결과를 보장한다.

**지속성 (Durability)**
- 커밋된 트랜잭션이 기록한 데이터는 데이터베이스에 결함이 발생하더라도 손실되지 않아야 한다.
- 쓰기 전 로그 (WAL)을 사용하거나 레플리케이션을 사용하여 여러 노드에 데이터를 복사하여 지속성을 보장할 수 있다.
- 지속성을 보장하려면 트랜잭션이 커밋됐다고 보고하기 전에 쓰기나 복제가 완료될 때까지 기다려야 한다.