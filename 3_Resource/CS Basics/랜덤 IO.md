#papercut #Database 

데이터를 저장하는 디스크는 HDD와 SSD가 있다.

`랜덤 I/O`: 디스크 저장 공간에 **불연속적**으로 위치한 데이터를 읽어오는 과정.

`순차 I/O`: 디스크 저장공간에 **연속적**으로 위치한 데이터를 읽어오는 과정.
### HDD에서의 랜덤 I/O & 순차 I/O

HDD에서는 데이터를 읽을 때 디스크 헤드를 대상 데이터가 저장되어있는 지점으로 이동시킨다. 디스크 헤드를 이동시키는 시간을 **Seek Time**이라 하며 많은 시간이 소요된다.

만약 3건의 데이터를 읽는다면 랜덤 I/O는 디스크 헤드를 3번 이동시켜야 하고 순차 I/O는 한 번 이동시키면 된다.
### SSD에서의 랜덤 I/O & 순차 I/O

SSD에서는 디스크 헤드가 존재하지 않으며 주소를 기반으로 데이터를 찾는다. 

덕분에 SSD에서는 랜덤 I/O던 순차 I/O던 데이터 조회, 삽입시에는 성능 차이가 없지만  데이터 변경시에는 랜덤 I/O가 순차 I/O보다 느리다.

데이터 변경시 SSD는 데이터를 지우고 다시 쓰게 되는데, 지울땐 블록 단위(128KB)로 지우고 쓸때는 (4KB)로 쓴다. - **쓰기 증폭**

때문에 작은 데이터를 수정하는 경우 불필요한 부분까지 지우고 다시 쓰는 과정을 거치는 데다 랜덤 I/O는 데이터 위치가 불연속적이기 때문에 이 과정을 여러번 수행해야한다.

랜덤 I/O를 줄이도록 쿼리를 튜닝해야 하며 [[Index Range Scan]]은 데이터를 읽을 때 랜덤 I/O를, Full Table Scan은 순차 I/O를 사용한다.

데이터 크기가 크다면 옵티마이저는 Full Table Scan을 선택하여 순차 I/O로 동작하도록 한다.